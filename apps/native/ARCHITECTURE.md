# Native App ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®šæ›¸ (ADR)

## ğŸ¯ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

PromPalette Native Appã¯ **Tauri + SQLite** ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚

## ğŸ“‹ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ±ºå®š

### **é¸æŠã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£: Tauri + ãƒ­ãƒ¼ã‚«ãƒ«SQLite**

```
Frontend (React + TypeScript)
    â†“ Tauri invoke commands
Backend (Rust)
    â†“ sqlx
SQLite Database (ãƒ­ãƒ¼ã‚«ãƒ«)
```

### **æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯**

- **Frontend**: React 18 + TypeScript + Tailwind CSS
- **State Management**: Zustand
- **Native Shell**: Tauri 2.0
- **Backend**: Rust
- **Database**: SQLite + sqlx
- **Build**: Vite
- **Testing**: Vitest + React Testing Library

## ğŸ¯ è¨­è¨ˆåŸå‰‡

### **1. ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

**æ±ºå®šç†ç”±**: ä»•æ§˜å¤‰æ›´å¾Œã®P0æ©Ÿèƒ½è¦ä»¶
- ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼‰
- ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ï¼‰
- ä¸€æ„è­˜åˆ¥å­ã‚·ã‚¹ãƒ†ãƒ ï¼ˆé«˜é€Ÿãƒ­ãƒ¼ã‚«ãƒ«æ¤œç´¢ï¼‰

### **2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é‡è¦–**

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™**:
- è­˜åˆ¥å­å®Œå…¨ä¸€è‡´æ¤œç´¢: <5ms
- ã‚¢ãƒ—ãƒªå…¨ä½“ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: <20MB
- ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚º: <20MB
- èµ·å‹•æ™‚é–“: <2ç§’

### **3. æ®µéšçš„æ©Ÿèƒ½è¿½åŠ **

```
Phase 1.0: åŸºæœ¬CRUD + ã‚³ãƒ”ãƒ¼æ©Ÿèƒ½ âœ…
Phase 1.1: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ç®¡ç†
Phase 1.2: ãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ + è­˜åˆ¥å­ã‚·ã‚¹ãƒ†ãƒ 
Phase 2.0: é«˜åº¦æ¤œç´¢ + ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ›ãƒƒãƒˆã‚­ãƒ¼
```

## ğŸ”„ å°†æ¥ã®æ‹¡å¼µæ€§

### **ã‚¯ãƒ©ã‚¦ãƒ‰çµ±åˆã¸ã®å¯¾å¿œ**

ç¾åœ¨ã®ãƒ­ãƒ¼ã‚«ãƒ«ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ã€å°†æ¥ã®ã‚¯ãƒ©ã‚¦ãƒ‰æ©Ÿèƒ½ã¨å…±å­˜å¯èƒ½:

```rust
// å°†æ¥ã®æ‹¡å¼µä¾‹
pub enum DataSource {
    Local(SqlitePool),      // ç¾åœ¨ã®å®Ÿè£…
    Remote(ApiClient),      // å°†æ¥ã®æ‹¡å¼µ
    Hybrid(SqlitePool, ApiClient), // ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ
}
```

### **ãƒãƒ¼ãƒ æ©Ÿèƒ½ã¸ã®å¯¾å¿œ**

- ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹: å€‹äººç”¨é«˜é€Ÿã‚¢ã‚¯ã‚»ã‚¹
- åŒæœŸæ©Ÿèƒ½: ãƒãƒ¼ãƒ å…±æœ‰ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
- ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œ: ãƒ­ãƒ¼ã‚«ãƒ«å„ªå…ˆã€ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰åŒæœŸ

## ğŸš« å´ä¸‹ã•ã‚ŒãŸã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### **Web APIçµ±åˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

**å´ä¸‹ç†ç”±**:
1. **P0è¦ä»¶ã¨ã®ä¸æ•´åˆ**: ãƒ•ã‚¡ã‚¤ãƒ«ç›£è¦–ã€ãƒ­ãƒ¼ã‚«ãƒ«æ¤œç´¢ãŒä¸å¯èƒ½
2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™æœªé”**: ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é…å»¶ã§<5msæ¤œç´¢ä¸å¯èƒ½
3. **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½**: è¦æ±‚ã•ã‚Œã¦ã„ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ã‚¯ã‚»ã‚¹ä¸å¯

### **ç´”ç²‹Webã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**

**å´ä¸‹ç†ç”±**:
1. **ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™**
2. **ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ›ãƒƒãƒˆã‚­ãƒ¼ä¸å¯**
3. **ãƒã‚¤ãƒ†ã‚£ãƒ–çµ±åˆä¸å¯**

## ğŸ“Š å“è³ªä¿è¨¼

### **ãƒ†ã‚¹ãƒˆæˆ¦ç•¥**

- **Unit Tests**: å„æ©Ÿèƒ½ã®å˜ä½“ãƒ†ã‚¹ãƒˆ
- **Integration Tests**: Tauriã‚³ãƒãƒ³ãƒ‰ã®çµ±åˆãƒ†ã‚¹ãƒˆ
- **E2E Tests**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ã®ãƒ†ã‚¹ãƒˆ

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ**

- **èµ·å‹•æ™‚é–“**: 2ç§’ä»¥å†…
- **æ¤œç´¢å¿œç­”**: 5msä»¥å†…ï¼ˆè­˜åˆ¥å­æ¤œç´¢ï¼‰
- **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**: 20MBä»¥å†…

### **å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹**

- **ãƒ†ã‚¹ãƒˆæˆåŠŸç‡**: 100%
- **ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸**: >90%
- **TypeScript**: strict mode
- **Lint**: è­¦å‘Š0ä»¶

## ğŸ”§ é–‹ç™ºã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

### **ã‚³ãƒ¼ãƒ‰å“è³ª**

```typescript
// âœ… æ¨å¥¨: å‹å®‰å…¨ãªå®Ÿè£…
const result = await invoke<PromptResponse>('get_prompt', { id })

// âŒ ç¦æ­¢: anyå‹ã®ä½¿ç”¨
const result = await invoke('get_prompt', { id }) as any
```

### **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**

```rust
// âœ… æ¨å¥¨: æ§‹é€ åŒ–ã‚¨ãƒ©ãƒ¼
#[derive(Debug, serde::Serialize)]
pub struct ErrorResponse {
    pub error: String,
    pub code: Option<u32>,
}

// âŒ ç¦æ­¢: æ–‡å­—åˆ—ã‚¨ãƒ©ãƒ¼
return Err("Something went wrong".to_string());
```

### **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**

```rust
// âœ… æ¨å¥¨: éåŒæœŸå‡¦ç†
#[tauri::command]
pub async fn search_prompts(query: String) -> Result<Vec<Prompt>, ErrorResponse>

// âŒ ç¦æ­¢: åŒæœŸãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°
#[tauri::command]
pub fn search_prompts_sync(query: String) -> Vec<Prompt>
```

## ğŸ‰ ã¾ã¨ã‚

PromPalette Native Appã¯ã€**ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆ**ã®æ€æƒ³ã«åŸºã¥ã**Tauri + SQLite**ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šï¼š

1. **é«˜é€Ÿãªæ¤œç´¢ä½“é¨“** (<5ms)
2. **å …ç‰¢ãªã‚ªãƒ•ãƒ©ã‚¤ãƒ³æ©Ÿèƒ½**
3. **å°†æ¥ã®ã‚¯ãƒ©ã‚¦ãƒ‰çµ±åˆã¸ã®æ‹¡å¼µæ€§**

ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚ã“ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¯ä»•æ§˜å¤‰æ›´å¾Œã®P0è¦ä»¶ã«å®Œå…¨ã«åˆè‡´ã—ã€PromPaletteã®å·®åˆ¥åŒ–è¦å› ã§ã‚ã‚‹ã€Œç¬æ™‚ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚’æŠ€è¡“çš„ã«æ”¯ãˆã¦ã„ã¾ã™ã€‚